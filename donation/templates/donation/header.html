{% load static %}
<header class="site-header clearfix">
  <nav class="navbar fixed-top bg-white navbar-expand-md">
    <div class="container">
      <a class="navbar-brand mr-4" href="{% url 'home' %}"><img src="{% static 'homepage/img/logo.png' %}" alt=""></a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggle"
        aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarToggle">
        <div class="navbar-nav mr-auto">
          <a class="nav-item nav-link" href="{% url 'home' %}">Home</a>
          <a class="nav-item nav-link" href="">About</a>
        </div>
        <!-- Navbar Right Side -->
        <div class="navbar-nav">
          <!-- Add conditional statement to present different tab dependiing on the login status -->
          {% if user.is_authenticated %}
          <a class="nav-item nav-link" href="{% url 'logout' %}">Logout</a>
          {% if user.donorprofile %}
          <a class="nav-item nav-link" href="{% url 'register:donor-profile' user.username %}"><i
              class="fas fa-user-circle"></i></a>
          <a class="nav-item nav-link" href="{% url 'donation:donation-home' %}"><i class="fas fa-box-open"></i></a>
          {% elif user.helpseekerprofile %}
          <a id="display" class="nav-item nav-link" href="#"><i class="fas fa-bell"></i></a>
          <a class="nav-item nav-link" href="{% url 'register:helpseeker-profile' %}"><i
              class="fas fa-user-circle"></i></a>
          <a class="nav-item nav-link" href="{% url 'main-map' %}"><i class="fas fa-map-marker-alt"></i></a>
          <a class="nav-item nav-link" href="{% url 'reservation:reservation-home' %}"><i class="fas fa-box-open"></i></a>
          {% else %}
          <a class="nav-item nav-link" href="/admin"><i class="fas fa-user-circle"></i></a>
          {% endif %}

          {% else %}
          <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
          <a class="nav-item nav-link" href="{% url 'register:register' %}">Register</a>
          {% endif %}

        </div>
      </div>
    </div>
  </nav>
</header>

<script>
    $(document).ready(function(){
        setInterval(() => {
            $.ajax({
                type: 'GET',
                url: "{% url 'donation:getResourcePosts' %}",
                success: function(response) {
                  $("#display").empty()
                  let postCounter = 0
                  for (i = 0; i < response.resource_posts.length; i++) {
                    postCounter += 1
                  }
                  $("#display").append(postCounter)
                },
                error: function(response) {
                    alert("No DATA FOUND")
                }
            })
        }, 5000)
    })
</script>
