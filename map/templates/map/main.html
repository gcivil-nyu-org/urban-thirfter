{% extends 'donation/navfull.html' %}
{% block content %}
<!-- shelter data-->
<div id='map'></div>
<script>
  mapboxgl.accessToken = '{{ mapbox_access_token }}'
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/jginmb7/ckgg1lsi02e2m1ao7bk8ov89z',
    center: [-73.935242, 40.730610],
    zoom: 9.5
  })
</script>

{% for post in post_context %}
<script>
  new mapboxgl.Marker({ "color": 'blue' })
    .setLngLat([{{ post.dropoff_location.longitude }},
    {{ post.dropoff_location.latitude }}])
    .setPopup(new mapboxgl.Popup({ offset: 25 })
      .setHTML("<p>Resource Post</p>\n" +
      "<h3>{{ post.title }}</h3>\n" +
      "<h3>{{ post.description }}</h3>" +
      "<h3>{{ post.quantity }}</h3>\n" +
      "<div class='form-group'>\n" +
          "<button class='btn btn-dark btn-small' type='submit'>\n" +
              "Reserve\n" +
          "</button>\n" +
      "</div>"))
    .addTo(map)
</script>
{% endfor %}


{% for center in drop_in_centers %}
<script>
  new mapboxgl.Marker({ "color": 'red' })
    .setLngLat([{{ center.longitude }}, {{ center.latitude }}])
    .setPopup(new mapboxgl.Popup({ offset: 25 })
      .setHTML("<p>Drop-in Center</p><h3>{{ center.center_name }}</h3>"))
    .addTo(map)
</script>
{% endfor %}
{% endblock content %}
