{% extends 'donation/base.html' %}
{% block content %}
{% if user.is_authenticated and user.helpseekerprofile %}
{% for notification in notifications %}
{% if notification.receiver == user %}
<article class="card donation-card mb-2 animated fadeIn">
    <div class="card-header">
        <div class="row pt-2 pb-2 pl-4">
            <div class="col"><i class="fas fa-reply"></i>
                {% if notification.notificationstatus == 1 %}
                <b>Your reservation request has been accepted.</b>
                {% elif notification.notificationstatus == 2 %}
                <b>Your reservation request has been declined.</b>
                {% endif %}
                <!-- <p>{{ notification.msg }}</p> -->
            </div>
            <div class="col mr-3">
                {% if notification.is_seen == False %}
                <form method="POST" action="{% url 'reservation:read-message' notification.id %}">
                    {% csrf_token %}
                    <button name="read" class="btn btn-sm btn-outline-success float-right read-button" type="submit"><i
                            class="unread far fa-envelope"></i><i class="read far fa-envelope-open"></i></button>
                </form>
                {% else %}
                <p class="btn btn-sm btn-outline-success float-right"><i class="read far fa-envelope-open" style="color:green"></i></p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="card-body">
        <div class='container'>
            <div class="row">
                <!-- <div class="col-2">
                    <p class="article-img img-circle"><img class="img-thumbnail"
                            src='{{notification.post.post.image.url}}'></i></p>
                </div> -->
                <div class="col">
                    <b>Reservation Item:</b>
                    <p>{{ notification.post.post.title }}</p>
                </div>
                <div class="col">
                    <b>Dropoff Request Time: </b>
                    <p>{{ notification.post.dropoff_time_request }}</p>
                </div>
                <div class="col">
                    <b>Dropoff Location:</b>
                    <p>{{ notification.post.post.dropoff_location.place }}</p>
                </div>
                <div class="col">
                    {% if notification.notificationstatus == 1 %}
                    <p class="btn btn-wide btn-success float-right">Accepted</p>
                    {% elif notification.notificationstatus == 2 %}
                    <p class="btn btn-wide btn-danger float-right">Denied</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</article>
{% endif %}
{% empty %}
<div class="mt-3 alert alert-info text-center">You have not received any messages yet.</div>
{% endfor %}
{% endif %}
{% endblock %}