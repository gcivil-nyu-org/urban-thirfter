{% extends 'donation/base.html' %}
{% load static %}
{% block content %}
<div class="content-section container animated fadeInUp">
    <!-- <img class='rounded-circle article-img' src='{% static "donation/asset/user.svg" %}'> -->
    <!--  p>{{ object.image.url }}</p-->
    <div class="row justify-content-around">
        <div class="col-md-10">
            <legend class='mb-4 font-weight-bold'>Reservation Details</legend>
        </div>
    </div>
    <!-- Crispy filter to style the form -->
    <div class="row justify-content-around">
        <!-- <div class="col-md-4">
            <img src="{{object.image.url}}" />
        </div> -->
        <div class="col-4">
            <label>Title</label>
            <p class="graybox">{{ object.title }}</p>
            <label>Dropoff Location</label>
            <p class="graybox">{{ object.dropoff_location.place }}</p>
        </div>
        <div class="col-4">
            <label>Resource Category</label>
            <p class="graybox">{{ object.resource_category }}</p>
            <label>Quantity</label>
            <p class="graybox">{{ object.quantity }}</p>
            <label>Description</label>
            <p class="graybox">{{ object.description }}</p>
        </div>
    </div>
    <div class="row justify-content-around">
        <div class="col-md-10">
            <div id="dropoff-location" class="mt-3 mb-3"></div>
            <form method="POST" action="{% url 'reservation:reservation-function' object.id %}">
                {% csrf_token %}
                <p>Drop-off Time*</p>
                <input type="radio" id="dropoff_time_1" name="dropoff_time" value=1>
                <label class="graybox" for="dropoff_time_1">{{ object.dropoff_time_1 }}</label>
                {% if object.dropoff_time_2 != None %}
                <input type="radio" id="dropoff_time_2" name="dropoff_time" value=2>
                <label class="graybox" for="dropoff_time_2">{{ object.dropoff_time_2 }}</label>
                {% endif %}
                {% if object.dropoff_time_3 != None %}
                <input type="radio" id="dropoff_time_3" name="dropoff_time" value=3>
                <label class="graybox" for="dropoff_time_3">{{ object.dropoff_time_3 }}</label>
                {% endif %}
                <div class="text-center"><button class="mt-3 btn btn-dark btn-wide" type="submit">Reserve</button></div>
            </form>
        </div>
    </div>

</div>

<script>
    mapboxgl.accessToken = "pk.eyJ1Ijoiamdpbm1iNyIsImEiOiJja2cybXpuNzAwMXFzMnFqdDFzbXBmNGszIn0.6UJeoJW2FwSS9LAOZN_QBw"
    var map = new mapboxgl.Map({
        container: 'dropoff-location',
        style: 'mapbox://styles/jginmb7/ckgg1lsi02e2m1ao7bk8ov89z',
        center: ["{{ object.dropoff_location.longitude}}", "{{ object.dropoff_location.latitude}}"],
        // center: [-73.8648, 40.8448],
        zoom: 15
    });
    new mapboxgl.Marker()
        .setLngLat(["{{ object.dropoff_location.longitude}}", "{{ object.dropoff_location.latitude}}"])
        .addTo(map)
</script>
{% endblock content %}